(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{1:function(e,a,t){e.exports={centered:"auth_centered__2RBLh",form_wrapper:"auth_form_wrapper__22ZCS",form_container:"auth_form_container__2NdM1",form_header:"auth_form_header__1FJpD",divider_container:"auth_divider_container__2M3ll",login_form_container:"auth_login_form_container__15Huy",auth_input:"auth_auth_input__2az5X",auth_button:"auth_auth_button__1oTZQ",error_message:"auth_error_message__23by8",demo_button:"auth_demo_button__heXiW",header_title:"auth_header_title__3zDfD",header_tagline:"auth_header_tagline__1cspj",form_footer:"auth_form_footer__iHZQb",footer_tagline:"auth_footer_tagline__24g1M",footer_cta_wrapper:"auth_footer_cta_wrapper__15Xwe",footer_cta:"auth_footer_cta__t39zu",divider_text:"auth_divider_text__3O4Ja",body:"auth_body__1_Clf",divider_line:"auth_divider_line__3jTkq",login_form_error_container:"auth_login_form_error_container__1lV1x",auth_error_list:"auth_auth_error_list__1h7EV"}},18:function(e,a,t){e.exports={home_wrapper:"home_home_wrapper__1haEU",special_wrapper:"home_special_wrapper__2sZdX"}},23:function(e,a,t){e.exports={background:"main_background__yJmlC",user_name:"main_user_name__2lfp2",wrapper:"main_wrapper__2I1e6"}},31:function(e,a,t){e.exports={full_width:"shared_full_width__2ksO6"}},33:function(e,a,t){e.exports=t(45)},38:function(e,a,t){},45:function(e,a,t){"use strict";t.r(a),t.d(a,"store",(function(){return $}));var r=t(0),n=t.n(r),c=t(19),s=t.n(c),o=(t(38),t(2)),u=t.n(o),l=t(3),i=t(5),m=t(4),_=t(6),p=t(17),d=t.n(p),f="session/SET_USER",v=function(e){return{type:f,user:e}},h=function(e,a){var t=d.a.get("XSRF-TOKEN");return function(){var r=Object(l.a)(u.a.mark((function r(n){var c;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch("/api/session/login",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFTOKEN":t},body:JSON.stringify({email_or_username:e,password:a,csrf_token:t})});case 2:return c=r.sent,r.next=5,c.json();case 5:return c.data=r.sent,c.ok&&n(v(c.data.user)),r.abrupt("return",c);case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},E=function(){var e=d.a.get("XSRF-TOKEN");return function(){var a=Object(l.a)(u.a.mark((function a(t){var r;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("/api/session/logout",{method:"DELETE",headers:{"X-CSRFTOKEN":e}});case 2:return r=a.sent,a.next=5,r.json();case 5:return r.data=a.sent,r.ok&&t({type:"session/LOGOUT_USER"}),a.abrupt("return",r);case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},b={user_id:null};var g=t(12),w=t(21),N=function(e,a,t){var r=d.a.get("XSRF-TOKEN");return function(){var n=Object(l.a)(u.a.mark((function n(c){var s,o;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("/api/users/",{method:"post",headers:{"Content-Type":"application/json","X-CSRFTOKEN":r},body:JSON.stringify({username:e,password:t,email:a,csrf_token:r})});case 2:return s=n.sent,n.next=5,s.json();case 5:if(o=n.sent,s.data=o,!s.ok){n.next=12;break}return c({type:"signup/CREATE_USER",user:o}),n.abrupt("return",s);case 12:return console.error("Bad response"),n.abrupt("return",s);case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},O=function(e){return function(){var a=Object(l.a)(u.a.mark((function a(t){var r;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("api/users/".concat(e));case 2:return r=a.sent,a.next=5,r.json();case 5:return r.data=a.sent,r.ok&&t({type:"users/SET_USER",user:r.data}),a.abrupt("return",r);case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()};var j=t(1),y=t.n(j),k=Object(m.g)((function(e){var a=e.history,t=Object(r.useState)(""),c=Object(g.a)(t,2),s=c[0],o=c[1],m=Object(r.useState)(""),p=Object(g.a)(m,2),d=p[0],f=p[1],v=Object(r.useState)(""),E=Object(g.a)(v,2),b=E[0],w=E[1],O=Object(r.useState)([]),j=Object(g.a)(O,2),k=j[0],x=j[1],S=Object(_.c)();Object(r.useEffect)((function(){x([])}),[s,d,b]);var C=function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,S(N(d,s,b));case 3:if(r=e.sent,console.log("signup res",r),!r.ok){e.next=10;break}return e.next=8,S(h(d,b));case 8:return a.replace("/"),e.abrupt("return");case 10:x(r.data.errors);case 11:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,S(h("demo@demo.com","password"));case 3:if(!(r=e.sent).ok){e.next=7;break}return a.replace("/"),e.abrupt("return");case 7:x(r.data.errors);case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:y.a.body},n.a.createElement("div",{className:"".concat(y.a.form_wrapper," ").concat(y.a.centered)},n.a.createElement("div",{className:y.a.form_container},n.a.createElement("div",{className:y.a.form_header},n.a.createElement("img",{alt:"logo",src:"https://i.imgur.com/GOpcw1D.png",style:{width:"30%"}}),n.a.createElement("h1",{className:y.a.header_title},"EverQuote"),n.a.createElement("div",{className:y.a.header_tagline},"Remember everything important.")),n.a.createElement("button",{onClick:T,className:y.a.demo_button},"Continue as Demo User"),n.a.createElement("div",{className:y.a.divider_container},n.a.createElement("div",{className:y.a.divider_text},"or"),n.a.createElement("div",{className:y.a.divider_line})),n.a.createElement("div",{className:y.a.login_form_container},n.a.createElement("form",{onSubmit:C},n.a.createElement("input",{name:"username",type:"text",value:d,onChange:function(e){return f(e.target.value)},className:y.a.auth_input,placeholder:"Username"}),n.a.createElement("input",{name:"email",type:"email",value:s,onChange:function(e){return o(e.target.value)},className:y.a.auth_input,placeholder:"Email"}),n.a.createElement("input",{name:"password",type:"password",value:b,onChange:function(e){return w(e.target.value)},className:y.a.auth_input,placeholder:"Password"}),n.a.createElement("div",{className:y.a.login_form_error_container},k.length?n.a.createElement("ul",{className:y.a.auth_error_list},k.map((function(e,a){return n.a.createElement("li",{className:y.a.error_message,key:"error-".concat(a+1)},e)}))):n.a.createElement(n.a.Fragment,null)),n.a.createElement("button",{type:"submit",className:y.a.auth_button},"Continue"))),n.a.createElement("div",{className:y.a.form_footer},n.a.createElement("div",{className:y.a.footer_tagline},"Already have an account?"),n.a.createElement("div",{className:y.a.footer_cta_wrapper},n.a.createElement(i.b,{className:y.a.footer_cta,to:"/log-in"},"Sign in"))))))})),x=Object(m.g)((function(e){var a=e.history,t=Object(r.useState)(""),c=Object(g.a)(t,2),s=c[0],o=c[1],m=Object(r.useState)(""),p=Object(g.a)(m,2),d=p[0],f=p[1],v=Object(r.useState)([]),E=Object(g.a)(v,2),b=E[0],w=E[1],N=Object(_.c)();Object(r.useEffect)((function(){w([])}),[s,d]);var O=function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,N(h(s,d));case 3:if(!(r=e.sent).ok){e.next=7;break}return a.replace("/"),e.abrupt("return");case 7:w(r.data.errors);case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),j=function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,N(h("demo","password"));case 3:if(!(r=e.sent).ok){e.next=7;break}return a.replace("/"),e.abrupt("return");case 7:w(r.data.errors);case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:y.a.body},n.a.createElement("div",{className:"".concat(y.a.form_wrapper," ").concat(y.a.centered)},n.a.createElement("div",{className:y.a.form_container},n.a.createElement("div",{className:y.a.form_header},n.a.createElement("img",{alt:"logo",src:"https://i.imgur.com/GOpcw1D.png",style:{width:"30%"}}),n.a.createElement("h1",{className:y.a.header_title},"EverQuote"),n.a.createElement("div",{className:y.a.header_tagline},"Remember everything important.")),n.a.createElement("button",{onClick:j,className:y.a.demo_button},"Continue as Demo User"),n.a.createElement("div",{className:y.a.divider_container},n.a.createElement("div",{className:y.a.divider_text},"or"),n.a.createElement("div",{className:y.a.divider_line})),n.a.createElement("div",{className:y.a.login_form_container},n.a.createElement("form",{method:"",action:"",onSubmit:O},n.a.createElement("div",null,n.a.createElement("input",{placeholder:"Email or Username",type:"text",name:"email_or_username",value:s,className:y.a.auth_input,onChange:function(e){o(e.target.value)}})),n.a.createElement("div",null,n.a.createElement("input",{placeholder:"Password",type:"password",name:"password",value:d,className:y.a.auth_input,onChange:function(e){f(e.target.value)}})),n.a.createElement("div",{className:y.a.login_form_error_container},b.length?n.a.createElement("ul",{className:y.a.auth_error_list},b.map((function(e,a){return n.a.createElement("li",{className:y.a.error_message,key:"error-".concat(a+1)},e)}))):n.a.createElement(n.a.Fragment,null)),n.a.createElement("button",{type:"submit",className:y.a.auth_button},"Continue"))),n.a.createElement("div",{className:y.a.form_footer},n.a.createElement("div",{className:y.a.footer_tagline},"Don't have an account?"),n.a.createElement("div",{className:y.a.footer_cta_wrapper},n.a.createElement(i.b,{className:y.a.footer_cta,to:"/join"},"Create account"))))))})),S=t(22),C=t(31),T=t.n(C),R=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"MyPuzzles"))},U=t(23),z=t.n(U),D=function(){var e=Object(_.d)((function(e){return e.entities.users[e.session.user_id]}));return n.a.createElement("div",{className:"".concat(z.a.background)},n.a.createElement("div",{className:"".concat(z.a.wrapper)},n.a.createElement("div",{className:"".concat(z.a.user_name)},e?"welcome, ".concat(e.username):"")))};var F=Object(m.g)((function(e){var a=e.match;return n.a.createElement("div",{className:T.a.full_width},n.a.createElement(m.b,{path:a.url+"my-puzzles",exact:!0,component:R}),n.a.createElement(m.b,{path:a.url,exact:!0,component:D}))})),X=t(18),J=t.n(X),H=t(8),K=t.n(H),M=Object(m.g)(Object(_.b)((function(e,a){var t=e.session.user_id;return Object(S.a)({user_id:t},a)}))((function(e){var a=e.history,t=(e.user_id,e.path,e.component,Object(_.c)()),r=Object(_.d)((function(e){return e.entities.users[e.session.user_id]})),c=function(){var e=Object(l.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,t(E());case 3:return e.sent.ok&&a.replace("/"),e.abrupt("return");case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:"".concat(K.a.background," ").concat(K.a.nav_wrapper)},n.a.createElement(i.c,{className:K.a.nav_link_large,to:"/quick-play",activeClassName:K.a.selected},"quick play"),r?n.a.createElement(i.c,{className:K.a.nav_link,to:"/my-puzzles",activeClassName:K.a.selected},"my puzzles"):"",n.a.createElement(i.c,{className:K.a.nav_link,to:"/shared",activeClassName:K.a.selected},"shared"),n.a.createElement("div",{className:K.a.separator}),n.a.createElement(i.c,{className:K.a.nav_link,to:"/how-to-play",activeClassName:K.a.selected},"how to play"),r?"":n.a.createElement(i.c,{className:K.a.nav_link,to:"/log-in",activeClassName:K.a.selected},"log in"),r?"":n.a.createElement(i.c,{className:K.a.nav_link,to:"/join",activeClassName:K.a.selected},"join"),r?n.a.createElement("a",{onClick:c},n.a.createElement("div",{className:K.a.navlink_text},"log out")):"")})));var P=Object(_.b)((function(e,a){return{userId:e.session.user_id}}))((function(e){var a=e.userId,t=Object(_.c)();return Object(r.useEffect)((function(){(function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(O(a));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,a]),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:J.a.home_wrapper},n.a.createElement(F,null),n.a.createElement(M,null)))})),Q=Object(_.b)((function(e,a){var t=e.session.user_id;return Object(S.a)({user_id:t},a)}))((function(e){var a=e.user_id,t=e.path,r=e.component;return a?n.a.createElement(m.b,{path:t,component:r}):n.a.createElement(n.a.Fragment,null,n.a.createElement(m.a,{to:"/"}),n.a.createElement(P,null))})),q=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(i.c,{to:"/"},"Home"),n.a.createElement(i.c,{to:"/my-puzzles"},"my puzzles"),n.a.createElement("h1",null,"Play"))},G=function(){return n.a.createElement("h1",null,"Shared")},L=function(){return n.a.createElement("h1",null,"HowToPlay")};var I,Z=function(){Object(r.useEffect)((function(){(function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/session/csrf");case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var e=Object(_.c)();return Object(r.useEffect)((function(){(function(){var a=Object(l.a)(u.a.mark((function a(){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e(function(){var e=Object(l.a)(u.a.mark((function e(a){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/session/load");case 2:return t=e.sent,e.next=5,t.json();case 5:return t.data=e.sent,t.ok&&a(v(t.data.user)),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}());case 2:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}})()()}),[e]),n.a.createElement(i.a,null,n.a.createElement(m.d,null,n.a.createElement(m.b,{exact:!0,path:"/quick-play"},n.a.createElement(q,null)),n.a.createElement(m.b,{exact:!0,path:"/shared"},n.a.createElement(G,null)),n.a.createElement(m.b,{exact:!0,path:"/how-to-play"},n.a.createElement(L,null)),n.a.createElement(m.b,{exact:!0,path:"/log-in"},n.a.createElement("div",{className:J.a.special_wrapper},n.a.createElement(x,null),n.a.createElement(M,null))),n.a.createElement(m.b,{exact:!0,path:"/join"},n.a.createElement("div",{className:J.a.special_wrapper},n.a.createElement(k,null),n.a.createElement(M,null))),n.a.createElement(Q,{path:"/",component:P})))},A=t(13),B=t(32),V=Object(A.c)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"signup/CREATE_USER":return a.user;case"session/LOGOUT_USER":return{};case"users/SET_USER":return Object(w.a)({},a.user.id,a.user);default:return e}}}),W=Object(A.c)({session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,a=arguments.length>1?arguments[1]:void 0,t=Object.assign({},e);switch(a.type){case f:return t.user_id=a.user.user_id,t;case"session/LOGOUT_USER":return b;default:return e}},entities:V});I=Object(A.a)(B.a);var Y,$=Object(A.d)(W,Y,I);s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(_.a,{store:$},n.a.createElement(Z,null))),document.getElementById("root"))},8:function(e,a,t){e.exports={nav_link:"nav_nav_link__2gHHs",background:"nav_background__a7-2_",nav_link_large:"nav_nav_link_large__2Qv8q",selected:"nav_selected__2VgXk",nav_wrapper:"nav_nav_wrapper__2mEcM",separator:"nav_separator__2QY84"}}},[[33,1,2]]]);
//# sourceMappingURL=main.4e60c5f9.chunk.js.map