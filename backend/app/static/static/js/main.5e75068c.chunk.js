(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{1:function(e,t,a){e.exports={centered:"auth_centered__2RBLh",form_wrapper:"auth_form_wrapper__22ZCS",form_container:"auth_form_container__2NdM1",form_header:"auth_form_header__1FJpD",divider_container:"auth_divider_container__2M3ll",login_form_container:"auth_login_form_container__15Huy",auth_input:"auth_auth_input__2az5X",auth_button:"auth_auth_button__1oTZQ",error_message:"auth_error_message__23by8",demo_button:"auth_demo_button__heXiW",header_title:"auth_header_title__3zDfD",header_tagline:"auth_header_tagline__1cspj",form_footer:"auth_form_footer__iHZQb",footer_tagline:"auth_footer_tagline__24g1M",footer_cta_wrapper:"auth_footer_cta_wrapper__15Xwe",footer_cta:"auth_footer_cta__t39zu",divider_text:"auth_divider_text__3O4Ja",body:"auth_body__1_Clf",divider_line:"auth_divider_line__3jTkq",login_form_error_container:"auth_login_form_error_container__1lV1x",auth_error_list:"auth_auth_error_list__1h7EV"}},22:function(e,t,a){e.exports={home_wrapper:"home_home_wrapper__1haEU"}},30:function(e,t,a){e.exports={full_width:"shared_full_width__2ksO6"}},32:function(e,t,a){e.exports=a(44)},37:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t),a.d(t,"store",(function(){return W}));var r=a(0),n=a.n(r),c=a(18),s=a.n(c),u=(a(37),a(2)),o=a.n(u),l=a(4),i=a(6),m=a(5),_=a(3),p=a(17),f=a.n(p),d="session/SET_USER",h=function(e){return{type:d,user:e}},v=function(e,t){var a=f.a.get("XSRF-TOKEN");return function(){var r=Object(l.a)(o.a.mark((function r(n){var c;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch("/api/session/login",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFTOKEN":a},body:JSON.stringify({email_or_username:e,password:t,csrf_token:a})});case 2:return c=r.sent,r.next=5,c.json();case 5:return c.data=r.sent,c.ok&&n(h(c.data.user)),r.abrupt("return",c);case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},E=function(){var e=f.a.get("XSRF-TOKEN");return function(){var t=Object(l.a)(o.a.mark((function t(a){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/session/logout",{method:"DELETE",headers:{"X-CSRFTOKEN":e}});case 2:return r=t.sent,t.next=5,r.json();case 5:return r.data=t.sent,r.ok&&a({type:"session/LOGOUT_USER"}),t.abrupt("return",r);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},b={user_id:null};var g=a(12),O=a(20),N=function(e,t,a){var r=f.a.get("XSRF-TOKEN");return function(){var n=Object(l.a)(o.a.mark((function n(c){var s,u;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("/api/users/",{method:"post",headers:{"Content-Type":"application/json","X-CSRFTOKEN":r},body:JSON.stringify({username:e,password:a,email:t,csrf_token:r})});case 2:return s=n.sent,n.next=5,s.json();case 5:if(u=n.sent,s.data=u,!s.ok){n.next=12;break}return c({type:"signup/CREATE_USER",user:u}),n.abrupt("return",s);case 12:return console.error("Bad response"),n.abrupt("return",s);case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(l.a)(o.a.mark((function t(a){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("api/users/".concat(e));case 2:return r=t.sent,t.next=5,r.json();case 5:return r.data=t.sent,r.ok&&a({type:"users/SET_USER",user:r.data}),t.abrupt("return",r);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};var w=a(1),y=a.n(w),x=Object(m.g)((function(e){var t=e.history,a=Object(r.useState)(""),c=Object(g.a)(a,2),s=c[0],u=c[1],m=Object(r.useState)(""),p=Object(g.a)(m,2),f=p[0],d=p[1],h=Object(r.useState)(""),E=Object(g.a)(h,2),b=E[0],O=E[1],j=Object(r.useState)([]),w=Object(g.a)(j,2),x=w[0],k=w[1],S=Object(_.c)();Object(r.useEffect)((function(){k([])}),[s,f,b]);var C=function(){var e=Object(l.a)(o.a.mark((function e(a){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,S(N(f,s,b));case 3:if(r=e.sent,console.log("signup res",r),!r.ok){e.next=10;break}return e.next=8,S(v(f,b));case 8:return t.replace("/"),e.abrupt("return");case 10:k(r.data.errors);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(o.a.mark((function e(a){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,S(v("demo@demo.com","password"));case 3:if(!(r=e.sent).ok){e.next=7;break}return t.replace("/"),e.abrupt("return");case 7:k(r.data.errors);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:y.a.body},n.a.createElement("div",{className:"".concat(y.a.form_wrapper," ").concat(y.a.centered)},n.a.createElement("div",{className:y.a.form_container},n.a.createElement("div",{className:y.a.form_header},n.a.createElement("img",{alt:"logo",src:"https://i.imgur.com/GOpcw1D.png",style:{width:"30%"}}),n.a.createElement("h1",{className:y.a.header_title},"EverQuote"),n.a.createElement("div",{className:y.a.header_tagline},"Remember everything important.")),n.a.createElement("button",{onClick:T,className:y.a.demo_button},"Continue as Demo User"),n.a.createElement("div",{className:y.a.divider_container},n.a.createElement("div",{className:y.a.divider_text},"or"),n.a.createElement("div",{className:y.a.divider_line})),n.a.createElement("div",{className:y.a.login_form_container},n.a.createElement("form",{onSubmit:C},n.a.createElement("input",{name:"username",type:"text",value:f,onChange:function(e){return d(e.target.value)},className:y.a.auth_input,placeholder:"Username"}),n.a.createElement("input",{name:"email",type:"email",value:s,onChange:function(e){return u(e.target.value)},className:y.a.auth_input,placeholder:"Email"}),n.a.createElement("input",{name:"password",type:"password",value:b,onChange:function(e){return O(e.target.value)},className:y.a.auth_input,placeholder:"Password"}),n.a.createElement("div",{className:y.a.login_form_error_container},x.length?n.a.createElement("ul",{className:y.a.auth_error_list},x.map((function(e,t){return n.a.createElement("li",{className:y.a.error_message,key:"error-".concat(t+1)},e)}))):n.a.createElement(n.a.Fragment,null)),n.a.createElement("button",{type:"submit",className:y.a.auth_button},"Continue"))),n.a.createElement("div",{className:y.a.form_footer},n.a.createElement("div",{className:y.a.footer_tagline},"Already have an account?"),n.a.createElement("div",{className:y.a.footer_cta_wrapper},n.a.createElement(i.b,{className:y.a.footer_cta,to:"/login"},"Sign in"))))))})),k=Object(m.g)((function(e){var t=e.history,a=Object(r.useState)(""),c=Object(g.a)(a,2),s=c[0],u=c[1],m=Object(r.useState)(""),p=Object(g.a)(m,2),f=p[0],d=p[1],h=Object(r.useState)([]),E=Object(g.a)(h,2),b=E[0],O=E[1],N=Object(_.c)();Object(r.useEffect)((function(){O([])}),[s,f]);var j=function(){var e=Object(l.a)(o.a.mark((function e(a){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,N(v(s,f));case 3:if(!(r=e.sent).ok){e.next=7;break}return t.replace("/"),e.abrupt("return");case 7:O(r.data.errors);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(l.a)(o.a.mark((function e(a){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,N(v("demo","password"));case 3:if(!(r=e.sent).ok){e.next=7;break}return t.replace("/"),e.abrupt("return");case 7:O(r.data.errors);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:y.a.body},n.a.createElement("div",{className:"".concat(y.a.form_wrapper," ").concat(y.a.centered)},n.a.createElement("div",{className:y.a.form_container},n.a.createElement("div",{className:y.a.form_header},n.a.createElement("img",{alt:"logo",src:"https://i.imgur.com/GOpcw1D.png",style:{width:"30%"}}),n.a.createElement("h1",{className:y.a.header_title},"EverQuote"),n.a.createElement("div",{className:y.a.header_tagline},"Remember everything important.")),n.a.createElement("button",{onClick:w,className:y.a.demo_button},"Continue as Demo User"),n.a.createElement("div",{className:y.a.divider_container},n.a.createElement("div",{className:y.a.divider_text},"or"),n.a.createElement("div",{className:y.a.divider_line})),n.a.createElement("div",{className:y.a.login_form_container},n.a.createElement("form",{method:"",action:"",onSubmit:j},n.a.createElement("div",null,n.a.createElement("input",{placeholder:"Email or Username",type:"text",name:"email_or_username",value:s,className:y.a.auth_input,onChange:function(e){u(e.target.value)}})),n.a.createElement("div",null,n.a.createElement("input",{placeholder:"Password",type:"password",name:"password",value:f,className:y.a.auth_input,onChange:function(e){d(e.target.value)}})),n.a.createElement("div",{className:y.a.login_form_error_container},b.length?n.a.createElement("ul",{className:y.a.auth_error_list},b.map((function(e,t){return n.a.createElement("li",{className:y.a.error_message,key:"error-".concat(t+1)},e)}))):n.a.createElement(n.a.Fragment,null)),n.a.createElement("button",{type:"submit",className:y.a.auth_button},"Continue"))),n.a.createElement("div",{className:y.a.form_footer},n.a.createElement("div",{className:y.a.footer_tagline},"Don't have an account?"),n.a.createElement("div",{className:y.a.footer_cta_wrapper},n.a.createElement(i.b,{className:y.a.footer_cta,to:"/signup"},"Create account"))))))})),S=a(21),C=a(30),T=a.n(C),R=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"MyPuzzles"))},U=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"Main"))};var z=Object(m.g)((function(e){var t=e.match,a=Object(_.d)((function(e){return e.entities.users[e.session.user_id]}));return n.a.createElement("div",{className:T.a.full_width},a?a.username:"",n.a.createElement(m.b,{path:t.url+"my-puzzles",exact:!0,component:R}),n.a.createElement(m.b,{path:t.url,exact:!0,component:U}))})),F=a(22),D=a.n(F),X=a(8),H=a.n(X),M=Object(m.g)(Object(_.b)((function(e,t){var a=e.session.user_id;return Object(S.a)({user_id:a},t)}))((function(e){var t=e.history,a=(e.user_id,e.path,e.component,Object(_.c)()),r=Object(_.d)((function(e){return e.entities.users[e.session.user_id]})),c=function(){var e=Object(l.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,a(E());case 3:return e.sent.ok&&t.replace("/log-in"),e.abrupt("return");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:H.a.nav_wrapper},n.a.createElement(i.c,{className:H.a.nav_link,to:"/quick-play",activeClassName:H.a.selected},"quick play"),n.a.createElement(i.c,{className:H.a.nav_link,to:"/my-puzzles",activeClassName:H.a.selected},"my puzzles"),n.a.createElement(i.c,{className:H.a.nav_link,to:"/shared",activeClassName:H.a.selected},"shared"),n.a.createElement("div",{className:H.a.separator}),n.a.createElement(i.c,{className:H.a.nav_link,to:"/how-to-play",activeClassName:H.a.selected},"how to play"),n.a.createElement(i.c,{className:H.a.nav_link,to:"/log-in",activeClassName:H.a.selected},"log in"),n.a.createElement(i.c,{className:H.a.nav_link,to:"/join",activeClassName:H.a.selected},"join"),r?n.a.createElement("a",{onClick:c},n.a.createElement("div",{className:H.a.navlink_text},"log out")):"")})));var J=Object(_.b)((function(e,t){return{userId:e.session.user_id}}))((function(e){var t=e.userId,a=Object(_.c)();return Object(r.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(j(t));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a,t]),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:D.a.home_wrapper},n.a.createElement(z,null),n.a.createElement(M,null)))}));Object(_.b)((function(e,t){return{userId:e.session.user_id}}))((function(e){var t=e.userId,a=Object(_.c)();return Object(r.useEffect)((function(){}),[a,t]),n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"Home - Logged Out"),n.a.createElement("div",{className:D.a.home_wrapper},n.a.createElement(z,null),n.a.createElement(M,null)))}));var K=Object(_.b)((function(e,t){var a=e.session.user_id;return Object(S.a)({user_id:a},t)}))((function(e){var t=e.user_id,a=e.path,r=e.component;return t?n.a.createElement(m.b,{path:a,component:r}):n.a.createElement(n.a.Fragment,null,n.a.createElement(m.a,{to:"/"}),n.a.createElement(J,null))})),L=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(i.c,{to:"/"},"Home"),n.a.createElement(i.c,{to:"/my-puzzles"},"my puzzles"),n.a.createElement("h1",null,"Play"))},P=function(){return n.a.createElement("h1",null,"Shared")},G=function(){return n.a.createElement("h1",null,"HowToPlay")};var I,Q=function(){Object(r.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/session/csrf");case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var e=Object(_.c)();return Object(r.useEffect)((function(){(function(){var t=Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/session/load");case 2:return a=e.sent,e.next=5,a.json();case 5:return a.data=e.sent,a.ok&&t(h(a.data.user)),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),n.a.createElement(i.a,null,n.a.createElement(m.d,null,n.a.createElement(m.b,{exact:!0,path:"/quick-play"},n.a.createElement(L,null)),n.a.createElement(m.b,{exact:!0,path:"/shared"},n.a.createElement(P,null)),n.a.createElement(m.b,{exact:!0,path:"/how-to-play"},n.a.createElement(G,null)),n.a.createElement(m.b,{exact:!0,path:"/log-in"},n.a.createElement(k,null),n.a.createElement(M,null)),n.a.createElement(m.b,{exact:!0,path:"/join"},n.a.createElement(x,null),n.a.createElement(M,null)),n.a.createElement(K,{path:"/",component:J})))},q=a(13),A=a(31),B=Object(q.c)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"signup/CREATE_USER":return t.user;case"session/LOGOUT_USER":return{};case"users/SET_USER":return Object(O.a)({},t.user.id,t.user);default:return e}}}),V=Object(q.c)({session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0,a=Object.assign({},e);switch(t.type){case d:return a.user_id=t.user.user_id,a;case"session/LOGOUT_USER":return b;default:return e}},entities:B});I=Object(q.a)(A.a);var Z,W=Object(q.d)(V,Z,I);s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(_.a,{store:W},n.a.createElement(Q,null))),document.getElementById("root"))},8:function(e,t,a){e.exports={nav_link:"nav_nav_link__2gHHs",selected:"nav_selected__2VgXk",nav_wrapper:"nav_nav_wrapper__2mEcM",separator:"nav_separator__2QY84"}}},[[32,1,2]]]);
//# sourceMappingURL=main.5e75068c.chunk.js.map